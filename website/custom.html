<!DOCTYPE html>

<html>
 <head>
  <title>PHP Test</title>
 
  <!-- JAVASCRIPT -->
  <script>
    var i = 1;
    function addfields() {
      var e = document.createElement("P");
      e.setAttribute("id", i);
      var t = document.createTextNode("Bin "+ i+": ");
      e.appendChild(t);      
      //Add start bin
      var x = document.createElement("INPUT");
      x.setAttribute("type", "text");
      x.setAttribute("name", 'binsStart[]');
      x.setAttribute("id", "start"+i);
      e.appendChild(x);
      //Add "-"
      t = document.createTextNode(" - ");
      e.appendChild(t);
      //Add end bin
      x = document.createElement("INPUT");
      x.setAttribute("type", "text");
      x.setAttribute("name", 'binsEnd[]');
      x.setAttribute("id", "end"+i);
      e.appendChild(x);
      //Add "Probability:"
      t = document.createTextNode("Probability %: ");
      e.appendChild(t);
      //Add probability
      x = document.createElement("INPUT");
      x.setAttribute("type", "text");
      x.setAttribute("name", 'probs[]');
      x.setAttribute("id", "prob"+i);
      e.appendChild(x);
      i++;
      document.getElementById("binsform").appendChild(e);   
    }

    function removefields() {
      document.getElementById("binsform").removeChild(document.getElementById(i-1)); 
      i--;
    }

    //create bins based on number entered by user
    function createbins() {
       var j;
       var number = parseInt(document.getElementById("bincreate").value);
       while (i<=number){
         addfields();
       }
       // auto fill of the bins
       var val = parseInt(document.getElementById("min").value);
       var step = parseInt(document.getElementById("step").value);

       for (j=1; j<i; j++){
	  document.getElementById("start"+j).value = val;
          val--;
          val += step;
     //     step = val; 
	  document.getElementById("end"+j).value = val;
          val++;
          
       }

    }

    //check sum of probabilities
    function checksum() {
	var sum = 0;
        var j;

        for (j = 1; j < i; j++){
	  sum += parseFloat(document.getElementById("prob"+j).value);
	}

        if (sum > 100){
          var diff = sum-100;
          alert("Percentage sum is bigger than 100 by " + diff);
          return false;
        }
        else if (isNaN(sum) || sum < 100){
          var diff = 100-sum;
          alert("Percentage sum is smaller than 100 by " + diff);
          return false;
        }
        else return true;
    }
  </script>

  
 </head>
 <body>
<br><br>
	Test Stuff: 

        <div id = "build">
	  Enter number of bins to add: <input type="text" id="bincreate" name="binacreate"/><br> 
	  Enter minimum value of infecion data: <input type="text" id="min" name="min"/> <br>
	  Enter step value of infection data: <input type="text" id="step" name="step"/> <br><br>

	  Enter location of taken data: <input type="text" id="location" name="location"/> <br>
	  Enter mosquitoi species: <input type="text" id="species" name="species"/> <br>
          <button type="button" onclick="createbins()"> Create </button> 
	</div>

        <div id="bins">
	  <form id="binsform" action="process.php" method="get">

        </div>

	<button type="button" onclick="addfields()"> Add Bins </button>
	<button type="button" onclick="removefields()"> Remove Bins </button>
	<br><br>
	<input type="checkbox" name="functionLaw[]" value="powerLaw">Powerlaw Model<br>
	<input type="checkbox" name="functionLaw[]" value="threshold">Threshold Model<br> 
	<input type="checkbox" name="functionLaw[]" value="logisticThreshold">Logistic Threshold Model<br> 
        <p>Number of Samples: <input type="text" name="size" value="3000" /> </p> <br>
	<br><br>
	<input type="submit" value="Submit" onclick=" return checksum();">
	</form>
	
</body>
</html>


